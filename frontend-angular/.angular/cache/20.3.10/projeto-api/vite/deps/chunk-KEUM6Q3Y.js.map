{
  "version": 3,
  "sources": ["../../../../../../node_modules/devextreme/esm/__internal/events/gesture/m_emitter.gesture.js"],
  "sourcesContent": ["/**\r\n * DevExtreme (esm/__internal/events/gesture/m_emitter.gesture.js)\r\n * Version: 25.1.6\r\n * Build date: Mon Oct 13 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Emitter from \"../../../common/core/events/core/emitter\";\r\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\r\nimport {\r\n    createEvent,\r\n    eventData,\r\n    eventDelta,\r\n    isDxMouseWheelEvent,\r\n    isTouchEvent,\r\n    needSkipEvent\r\n} from \"../../../common/core/events/utils/index\";\r\nimport $ from \"../../../core/renderer\";\r\nimport callOnce from \"../../../core/utils/call_once\";\r\nimport {\r\n    noop\r\n} from \"../../../core/utils/common\";\r\nimport {\r\n    sign\r\n} from \"../../../core/utils/math\";\r\nimport readyCallbacks from \"../../../core/utils/ready_callbacks\";\r\nimport {\r\n    styleProp\r\n} from \"../../../core/utils/style\";\r\nimport {\r\n    isDefined\r\n} from \"../../../core/utils/type\";\r\nimport devices from \"../../core/m_devices\";\r\nimport domUtils from \"../../core/utils/m_dom\";\r\nconst ready = readyCallbacks.add;\r\nconst {\r\n    abs: abs\r\n} = Math;\r\nconst SLEEP = 0;\r\nconst INITED = 1;\r\nconst STARTED = 2;\r\nlet TOUCH_BOUNDARY = 10;\r\nconst IMMEDIATE_TOUCH_BOUNDARY = 0;\r\nconst IMMEDIATE_TIMEOUT = 180;\r\nconst supportPointerEvents = function() {\r\n    return styleProp(\"pointer-events\")\r\n};\r\nconst setGestureCover = callOnce((() => {\r\n    const isDesktop = \"desktop\" === devices.real().deviceType;\r\n    if (!supportPointerEvents() || !isDesktop) {\r\n        return noop\r\n    }\r\n    const $cover = $(\"<div>\").addClass(\"dx-gesture-cover\").css(\"pointerEvents\", \"none\");\r\n    eventsEngine.subscribeGlobal($cover, \"dxmousewheel\", (e => {\r\n        e.preventDefault()\r\n    }));\r\n    ready((() => {\r\n        $cover.appendTo(\"body\")\r\n    }));\r\n    return function(toggle, cursor) {\r\n        $cover.css(\"pointerEvents\", toggle ? \"all\" : \"none\");\r\n        toggle && $cover.css(\"cursor\", cursor)\r\n    }\r\n}));\r\nconst gestureCover = function(toggle, cursor) {\r\n    const gestureCoverStrategy = setGestureCover();\r\n    gestureCoverStrategy(toggle, cursor)\r\n};\r\nconst GestureEmitter = Emitter.inherit({\r\n    gesture: true,\r\n    configure(data) {\r\n        this.getElement().css(\"msTouchAction\", data.immediate ? \"pinch-zoom\" : \"\");\r\n        this.callBase(data)\r\n    },\r\n    allowInterruptionByMouseWheel() {\r\n        return 2 !== this._stage\r\n    },\r\n    getDirection() {\r\n        return this.direction\r\n    },\r\n    _cancel() {\r\n        this.callBase.apply(this, arguments);\r\n        this._toggleGestureCover(false);\r\n        this._stage = 0\r\n    },\r\n    start(e) {\r\n        if (e._needSkipEvent || needSkipEvent(e)) {\r\n            this._cancel(e);\r\n            return\r\n        }\r\n        this._startEvent = createEvent(e);\r\n        this._startEventData = eventData(e);\r\n        this._stage = 1;\r\n        this._init(e);\r\n        this._setupImmediateTimer()\r\n    },\r\n    _setupImmediateTimer() {\r\n        clearTimeout(this._immediateTimer);\r\n        this._immediateAccepted = false;\r\n        if (!this.immediate) {\r\n            return\r\n        }\r\n        if (0 === this.immediateTimeout) {\r\n            this._immediateAccepted = true;\r\n            return\r\n        }\r\n        this._immediateTimer = setTimeout((() => {\r\n            this._immediateAccepted = true\r\n        }), this.immediateTimeout ?? 180)\r\n    },\r\n    move(e) {\r\n        if (1 === this._stage && this._directionConfirmed(e)) {\r\n            this._stage = 2;\r\n            this._resetActiveElement();\r\n            this._toggleGestureCover(true);\r\n            this._clearSelection(e);\r\n            this._adjustStartEvent(e);\r\n            this._start(this._startEvent);\r\n            if (0 === this._stage) {\r\n                return\r\n            }\r\n            this._requestAccept(e);\r\n            this._move(e);\r\n            this._forgetAccept()\r\n        } else if (2 === this._stage) {\r\n            this._clearSelection(e);\r\n            this._move(e)\r\n        }\r\n    },\r\n    _directionConfirmed(e) {\r\n        const touchBoundary = this._getTouchBoundary(e);\r\n        const delta = eventDelta(this._startEventData, eventData(e));\r\n        const deltaX = abs(delta.x);\r\n        const deltaY = abs(delta.y);\r\n        const horizontalMove = this._validateMove(touchBoundary, deltaX, deltaY);\r\n        const verticalMove = this._validateMove(touchBoundary, deltaY, deltaX);\r\n        const direction = this.getDirection(e);\r\n        const bothAccepted = \"both\" === direction && (horizontalMove || verticalMove);\r\n        const horizontalAccepted = \"horizontal\" === direction && horizontalMove;\r\n        const verticalAccepted = \"vertical\" === direction && verticalMove;\r\n        return bothAccepted || horizontalAccepted || verticalAccepted || this._immediateAccepted\r\n    },\r\n    _validateMove(touchBoundary, mainAxis, crossAxis) {\r\n        return mainAxis && mainAxis >= touchBoundary && (this.immediate ? mainAxis >= crossAxis : true)\r\n    },\r\n    _getTouchBoundary(e) {\r\n        return this.immediate || isDxMouseWheelEvent(e) ? 0 : TOUCH_BOUNDARY\r\n    },\r\n    _adjustStartEvent(e) {\r\n        const touchBoundary = this._getTouchBoundary(e);\r\n        const delta = eventDelta(this._startEventData, eventData(e));\r\n        this._startEvent.pageX += sign(delta.x) * touchBoundary;\r\n        this._startEvent.pageY += sign(delta.y) * touchBoundary\r\n    },\r\n    _resetActiveElement() {\r\n        if (\"ios\" === devices.real().platform && this.getElement().find(\":focus\").length) {\r\n            domUtils.resetActiveElement()\r\n        }\r\n    },\r\n    _toggleGestureCover(toggle) {\r\n        this._toggleGestureCoverImpl(toggle)\r\n    },\r\n    _toggleGestureCoverImpl(toggle) {\r\n        const isStarted = 2 === this._stage;\r\n        if (isStarted) {\r\n            gestureCover(toggle, this.getElement().css(\"cursor\"))\r\n        }\r\n    },\r\n    _clearSelection(e) {\r\n        if (isDxMouseWheelEvent(e) || isTouchEvent(e)) {\r\n            return\r\n        }\r\n        domUtils.clearSelection()\r\n    },\r\n    end(e) {\r\n        this._toggleGestureCover(false);\r\n        if (2 === this._stage) {\r\n            this._end(e)\r\n        } else if (1 === this._stage) {\r\n            this._stop(e)\r\n        }\r\n        this._stage = 0\r\n    },\r\n    dispose() {\r\n        clearTimeout(this._immediateTimer);\r\n        this.callBase.apply(this, arguments);\r\n        this._toggleGestureCover(false)\r\n    },\r\n    _init: noop,\r\n    _start: noop,\r\n    _move: noop,\r\n    _stop: noop,\r\n    _end: noop\r\n});\r\nGestureEmitter.initialTouchBoundary = TOUCH_BOUNDARY;\r\nGestureEmitter.touchBoundary = function(newBoundary) {\r\n    if (isDefined(newBoundary)) {\r\n        TOUCH_BOUNDARY = newBoundary;\r\n        return\r\n    }\r\n    return TOUCH_BOUNDARY\r\n};\r\nexport default GestureEmitter;\r\n"],
  "mappings": "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",
  "names": []
}
