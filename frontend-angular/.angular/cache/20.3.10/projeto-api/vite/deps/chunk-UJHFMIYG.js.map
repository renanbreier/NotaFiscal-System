{
  "version": 3,
  "sources": ["../../../../../../node_modules/devextreme/esm/__internal/events/gesture/m_emitter.gesture.scroll.js"],
  "sourcesContent": ["/**\r\n * DevExtreme (esm/__internal/events/gesture/m_emitter.gesture.scroll.js)\r\n * Version: 25.1.6\r\n * Build date: Mon Oct 13 2025\r\n *\r\n * Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    cancelAnimationFrame,\r\n    requestAnimationFrame\r\n} from \"../../../common/core/animation/frame\";\r\nimport registerEmitter from \"../../../common/core/events/core/emitter_registrator\";\r\nimport eventsEngine from \"../../../common/core/events/core/events_engine\";\r\nimport GestureEmitter from \"../../../common/core/events/gesture/emitter.gesture\";\r\nimport {\r\n    addNamespace,\r\n    eventData,\r\n    eventDelta,\r\n    isDxMouseWheelEvent,\r\n    isMouseEvent\r\n} from \"../../../common/core/events/utils/index\";\r\nimport Class from \"../../../core/class\";\r\nimport devices from \"../../core/m_devices\";\r\nconst {\r\n    abstract: abstract\r\n} = Class;\r\nconst realDevice = devices.real();\r\nconst SCROLL_EVENT = \"scroll\";\r\nconst SCROLL_INIT_EVENT = \"dxscrollinit\";\r\nconst SCROLL_START_EVENT = \"dxscrollstart\";\r\nconst SCROLL_MOVE_EVENT = \"dxscroll\";\r\nconst SCROLL_END_EVENT = \"dxscrollend\";\r\nconst SCROLL_STOP_EVENT = \"dxscrollstop\";\r\nconst SCROLL_CANCEL_EVENT = \"dxscrollcancel\";\r\nconst Locker = Class.inherit(function() {\r\n    const NAMESPACED_SCROLL_EVENT = addNamespace(\"scroll\", \"dxScrollEmitter\");\r\n    return {\r\n        ctor(element) {\r\n            this._element = element;\r\n            this._locked = false;\r\n            this._proxiedScroll = e => {\r\n                if (!this._disposed) {\r\n                    this._scroll(e)\r\n                }\r\n            };\r\n            eventsEngine.on(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll)\r\n        },\r\n        _scroll: abstract,\r\n        check(e, callback) {\r\n            if (this._locked) {\r\n                callback()\r\n            }\r\n        },\r\n        dispose() {\r\n            this._disposed = true;\r\n            eventsEngine.off(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll)\r\n        }\r\n    }\r\n}());\r\nconst TimeoutLocker = Locker.inherit({\r\n    ctor(element, timeout) {\r\n        this.callBase(element);\r\n        this._timeout = timeout\r\n    },\r\n    _scroll() {\r\n        this._prepare();\r\n        this._forget()\r\n    },\r\n    _prepare() {\r\n        if (this._timer) {\r\n            this._clearTimer()\r\n        }\r\n        this._locked = true\r\n    },\r\n    _clearTimer() {\r\n        clearTimeout(this._timer);\r\n        this._locked = false;\r\n        this._timer = null\r\n    },\r\n    _forget() {\r\n        const that = this;\r\n        this._timer = setTimeout((() => {\r\n            that._clearTimer()\r\n        }), this._timeout)\r\n    },\r\n    dispose() {\r\n        this.callBase();\r\n        this._clearTimer()\r\n    }\r\n});\r\nconst WheelLocker = TimeoutLocker.inherit({\r\n    ctor(element) {\r\n        this.callBase(element, 400);\r\n        this._lastWheelDirection = null\r\n    },\r\n    check(e, callback) {\r\n        this._checkDirectionChanged(e);\r\n        this.callBase(e, callback)\r\n    },\r\n    _checkDirectionChanged(e) {\r\n        if (!isDxMouseWheelEvent(e)) {\r\n            this._lastWheelDirection = null;\r\n            return\r\n        }\r\n        const direction = e.shiftKey || false;\r\n        const directionChange = null !== this._lastWheelDirection && direction !== this._lastWheelDirection;\r\n        this._lastWheelDirection = direction;\r\n        this._locked = this._locked && !directionChange\r\n    }\r\n});\r\nlet PointerLocker = TimeoutLocker.inherit({\r\n    ctor(element) {\r\n        this.callBase(element, 400)\r\n    }\r\n});\r\n! function() {\r\n    const {\r\n        ios: isIos,\r\n        android: isAndroid\r\n    } = realDevice;\r\n    if (!(isIos || isAndroid)) {\r\n        return\r\n    }\r\n    PointerLocker = Locker.inherit({\r\n        _scroll() {\r\n            this._locked = true;\r\n            const that = this;\r\n            cancelAnimationFrame(this._scrollFrame);\r\n            this._scrollFrame = requestAnimationFrame((() => {\r\n                that._locked = false\r\n            }))\r\n        },\r\n        check(e, callback) {\r\n            cancelAnimationFrame(this._scrollFrame);\r\n            cancelAnimationFrame(this._checkFrame);\r\n            const that = this;\r\n            const {\r\n                callBase: callBase\r\n            } = this;\r\n            this._checkFrame = requestAnimationFrame((() => {\r\n                callBase.call(that, e, callback);\r\n                that._locked = false\r\n            }))\r\n        },\r\n        dispose() {\r\n            this.callBase();\r\n            cancelAnimationFrame(this._scrollFrame);\r\n            cancelAnimationFrame(this._checkFrame)\r\n        }\r\n    })\r\n}();\r\nconst ScrollEmitter = GestureEmitter.inherit(function() {\r\n    const FRAME_DURATION = Math.round(1e3 / 60);\r\n    return {\r\n        ctor(element) {\r\n            this.callBase.apply(this, arguments);\r\n            this.direction = \"both\";\r\n            this._pointerLocker = new PointerLocker(element);\r\n            this._wheelLocker = new WheelLocker(element)\r\n        },\r\n        validate: () => true,\r\n        configure(data) {\r\n            if (data.scrollTarget) {\r\n                this._pointerLocker.dispose();\r\n                this._wheelLocker.dispose();\r\n                this._pointerLocker = new PointerLocker(data.scrollTarget);\r\n                this._wheelLocker = new WheelLocker(data.scrollTarget)\r\n            }\r\n            this.callBase(data)\r\n        },\r\n        _init(e) {\r\n            this._wheelLocker.check(e, (() => {\r\n                if (isDxMouseWheelEvent(e)) {\r\n                    this._accept(e)\r\n                }\r\n            }));\r\n            this._pointerLocker.check(e, (() => {\r\n                const skipCheck = this.isNative && isMouseEvent(e);\r\n                if (!isDxMouseWheelEvent(e) && !skipCheck) {\r\n                    this._accept(e)\r\n                }\r\n            }));\r\n            this._fireEvent(\"dxscrollinit\", e);\r\n            this._prevEventData = eventData(e)\r\n        },\r\n        move(e) {\r\n            this.callBase.apply(this, arguments);\r\n            e.isScrollingEvent = this.isNative || e.isScrollingEvent\r\n        },\r\n        _start(e) {\r\n            this._savedEventData = eventData(e);\r\n            this._fireEvent(\"dxscrollstart\", e);\r\n            this._prevEventData = eventData(e)\r\n        },\r\n        _move(e) {\r\n            const currentEventData = eventData(e);\r\n            this._fireEvent(\"dxscroll\", e, {\r\n                delta: eventDelta(this._prevEventData, currentEventData)\r\n            });\r\n            const delta = eventDelta(this._savedEventData, currentEventData);\r\n            if (delta.time > 200) {\r\n                this._savedEventData = this._prevEventData\r\n            }\r\n            this._prevEventData = eventData(e)\r\n        },\r\n        _end(e) {\r\n            const endEventDelta = eventDelta(this._prevEventData, eventData(e));\r\n            let velocity = {\r\n                x: 0,\r\n                y: 0\r\n            };\r\n            if (!isDxMouseWheelEvent(e) && endEventDelta.time < 100) {\r\n                const delta = eventDelta(this._savedEventData, this._prevEventData);\r\n                const velocityMultiplier = FRAME_DURATION / delta.time;\r\n                velocity = {\r\n                    x: delta.x * velocityMultiplier,\r\n                    y: delta.y * velocityMultiplier\r\n                }\r\n            }\r\n            this._fireEvent(\"dxscrollend\", e, {\r\n                velocity: velocity\r\n            })\r\n        },\r\n        _stop(e) {\r\n            this._fireEvent(\"dxscrollstop\", e)\r\n        },\r\n        cancel(e) {\r\n            this.callBase.apply(this, arguments);\r\n            this._fireEvent(\"dxscrollcancel\", e)\r\n        },\r\n        dispose() {\r\n            this.callBase.apply(this, arguments);\r\n            this._pointerLocker.dispose();\r\n            this._wheelLocker.dispose()\r\n        },\r\n        _clearSelection() {\r\n            if (this.isNative) {\r\n                return\r\n            }\r\n            return this.callBase.apply(this, arguments)\r\n        },\r\n        _toggleGestureCover() {\r\n            if (this.isNative) {\r\n                return\r\n            }\r\n            return this.callBase.apply(this, arguments)\r\n        }\r\n    }\r\n}());\r\nregisterEmitter({\r\n    emitter: ScrollEmitter,\r\n    events: [\"dxscrollinit\", \"dxscrollstart\", \"dxscroll\", \"dxscrollend\", \"dxscrollstop\", \"dxscrollcancel\"]\r\n});\r\nexport default {\r\n    init: \"dxscrollinit\",\r\n    start: \"dxscrollstart\",\r\n    move: \"dxscroll\",\r\n    end: \"dxscrollend\",\r\n    stop: \"dxscrollstop\",\r\n    cancel: \"dxscrollcancel\",\r\n    scroll: \"scroll\"\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
