import {
  message_default
} from "./chunk-7AOZESUR.js";
import {
  renderer_default
} from "./chunk-Q6FQHMWM.js";
import {
  Deferred,
  _extends
} from "./chunk-G6GPM76E.js";

// node_modules/devextreme/esm/__internal/core/utils/m_stubs.js
function stubComponent(componentName) {
  return class {
    constructor() {
      throw new Error(`Module '${componentName}' not found`);
    }
    static getInstance() {
    }
  };
}

// node_modules/devextreme/esm/__internal/ui/collection/search_box_controller.js
var getOperationBySearchMode = (searchMode) => "equals" === searchMode ? "=" : searchMode;
var SearchBoxController = class _SearchBoxController {
  static setEditorClass(value) {
    _SearchBoxController.EditorClass = value;
  }
  render(widgetPrefix, $container, options, createEditorCallback) {
    const rootElementClassName = `${widgetPrefix}-with-search`;
    const searchBoxClassName = `${widgetPrefix}-search`;
    const {
      searchEnabled,
      onValueChanged
    } = options;
    this._onSearchBoxValueChanged = onValueChanged;
    if (!searchEnabled) {
      $container.removeClass(rootElementClassName);
      this.remove();
      return;
    }
    if (this._editor) {
      this.updateEditorOptions(options);
    } else {
      const editorOptions = this._getEditorOptions(options);
      $container.addClass(rootElementClassName);
      const $editor = renderer_default("<div>").addClass(searchBoxClassName).prependTo($container);
      this._editor = createEditorCallback($editor, _SearchBoxController.EditorClass, editorOptions);
    }
  }
  updateEditorOptions(options) {
    var _this$_editor;
    const editorOptions = this._getEditorOptions(options);
    null === (_this$_editor = this._editor) || void 0 === _this$_editor || _this$_editor.option(editorOptions);
  }
  _getEditorOptions(options) {
    const {
      tabIndex,
      searchValue,
      searchEditorOptions,
      searchTimeout
    } = options;
    const placeholder = message_default.format("Search");
    return _extends({
      mode: "search",
      placeholder,
      tabIndex,
      value: searchValue,
      valueChangeEvent: "input",
      inputAttr: {
        "aria-label": placeholder
      },
      onValueChanged: (e) => {
        this._onValueChanged(e, searchTimeout);
      }
    }, searchEditorOptions);
  }
  _onValueChanged(e) {
    var _e$event;
    let searchTimeout = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
    this._valueChangeDeferred = Deferred();
    clearTimeout(this._valueChangeTimeout);
    this._valueChangeDeferred.done((() => {
      var _this$_onSearchBoxVal;
      null === (_this$_onSearchBoxVal = this._onSearchBoxValueChanged) || void 0 === _this$_onSearchBoxVal || _this$_onSearchBoxVal.call(this, e.value);
    }));
    if ("input" === (null === (_e$event = e.event) || void 0 === _e$event ? void 0 : _e$event.type) && searchTimeout) {
      this._valueChangeTimeout = setTimeout((() => {
        var _this$_valueChangeDef;
        null === (_this$_valueChangeDef = this._valueChangeDeferred) || void 0 === _this$_valueChangeDef || _this$_valueChangeDef.resolve();
      }), searchTimeout);
    } else {
      var _this$_valueChangeDef2;
      null === (_this$_valueChangeDef2 = this._valueChangeDeferred) || void 0 === _this$_valueChangeDef2 || _this$_valueChangeDef2.resolve();
    }
  }
  resolveValueChange() {
    var _this$_valueChangeDef3;
    null === (_this$_valueChangeDef3 = this._valueChangeDeferred) || void 0 === _this$_valueChangeDef3 || _this$_valueChangeDef3.resolve();
  }
  remove() {
    var _this$_editor2;
    null === (_this$_editor2 = this._editor) || void 0 === _this$_editor2 || _this$_editor2.$element().remove();
    this._editor = null;
  }
  focus() {
    var _this$_editor3;
    null === (_this$_editor3 = this._editor) || void 0 === _this$_editor3 || _this$_editor3.focus();
  }
  dispose() {
    this.remove();
  }
};
SearchBoxController.EditorClass = stubComponent("TextBox");
var search_box_controller_default = SearchBoxController;

export {
  getOperationBySearchMode,
  search_box_controller_default
};
//# sourceMappingURL=chunk-OU6GQY4H.js.map
